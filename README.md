# TNA Jamovi Plugin

This is a [Jamovi](https://www.jamovi.org/) plugin for the [`tna`](https://sonsoles.me) R package developed by Dylan Girault. The goal is to provide simplified access to Transition Network Analysis (TNA), a new learning analytics method developed by Mohammed Saqr, Santtu Tikka and Sonsoles López-Pernas.

## Transition Network Analysis
`tna` is an R package for the analysis of relational dynamics. TNA provides tools for building TNA models, plotting transition networks, calculating centrality measures, and identifying dominant events and patterns. TNA statistical techniques (e.g., bootstrapping and permutation tests) ensure the reliability of observed insights and confirm that identified dynamics are meaningful. See [(Saqr et al., 2024)](https://doi.org/10.1145/3706468.3706513) for more details on TNA. Also, check out our tutorials on the [basics](https://lamethods.org/book2/chapters/ch15-tna/ch15-tna.html) of TNA, [frequency-based](https://lamethods.org/book2/chapters/ch16-ftna/ch16-ftna.html) TNA, and [clustering](https://lamethods.org/book2/chapters/ch17-tna-clusters/ch17-tna-clusters.html) with TNA.

## Project structure
```yaml
TNA Jamovi Plugin
├── jamovi/ # YAML files describing the module's user interface
│ ├── 0000.yaml # Basic module configuration
│ ├── 00refs.yaml # Global references or definitions
│ ├── GroupTNA..yaml # Definition of Group TNA analysis attributes/results/user interface (a;r;u)
│ └── TNA..yaml # Definition of TNA analysis attributes/results/user interface (a;r;u)
│
├── R/ # R scripts containing the processing logic
│ ├── 00jmv.R # Analysis initialization script
│ ├── GroupTNA..R # R Functions Script for Group TNA Analysis
│ └── TNA..R # R Functions Script for TNA Analysis
│
├── DESCRIPTION # Module metadata (name, version, author, dependencies, etc.)
├── NAMESPACE # Exported functions and imported dependencies
```

## Installation

Requirements: [Jamovi](https://www.jamovi.org/) >= 2.6

1. Open Jamovi
2. Go to **Modules > Jamovi library > Sideload** 
3. Import the `.jmo` file
4. Select "TNAModule_x.x.x.jmo"

![Step 2 - Jamovi library](/docs/img/dropDown.png)

![Step 2 - Sideload](/docs/img/sideload.png)

## Operation

For example, we can try to open the `Transition Network Analysis` which open a view on different commands :

![Select TNA](/docs/img/TNASelected.png)

![TNA View](/docs/img/TNAView.png)

![TNA View](/docs/img/TNAViewActive.png)

## Editing

To modify or add a feature:

1. **Edit the YAML** in `jamovi/` to add a new option or entry
2. **Create or adapt an R script** in `R/` that retrieves these entries and applies logic
3. **Update `DESCRIPTION` and `NAMESPACE`** if dependencies are added
4. Recompile the module with `jmvtools::install()` in R

The build created is dependent on the OS used, so it is not possible to transmit a `.jmo` file compiled on Windows to a MacOS.

### YAML (User interface)

The `.yaml` files located in the `jamovi/` folder define:

- The options displayed in the Jamovi interface
- User settings (e.g., input variables, checkboxes, selections)
- The organization of tabs and groups

Each file corres    ponds to a view or part of the module:

- `GroupTNA.*.yaml`: for Group TNA analysis
- `TNA.*.yaml`: for TNA analysis

### Scripts R

The `.R` files in the `R/` folder perform data processing based on user choices made via the interface:

- The `*.b.R` names are written by the developer and represent the actual sequential processing
- The `*.h.R` names are generated by compilation. Do not modify them.

## Compilation and Deployment

In R:

```r
# If you don't have these libraries, you need to install them.
# devtools::install_github("sonsoleslp/tna", force=TRUE)
# install.packages("tna")
#  install.packages('jmvtools', repos=c('https://repo.jamovi.org', 'https://cran.r-project.org'))

library(jmvtools)
options(jamovi_home="path/to/your/jamovi") # ex : "C:/Program Files/jamovi x.x.x.x"
jmvtools::check() # Verify if it detects your jamovi
setwd("path/to/TNAMODULE") # ex : "C:/Users/X/Documents/TNAJamoviPlugin"
jmvtools::install()
```

This will install directly the plugin on your Jamovi installation and generate a `.jmo` file.
